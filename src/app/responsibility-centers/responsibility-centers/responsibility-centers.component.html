<dx-data-grid *ngIf="dataSource"
              id="gridContainer"
              [dataSource]="dataSource"
              [wordWrapEnabled]="true"
              [columnAutoWidth]="true"
              [allowColumnReordering]="true"
              [allowColumnResizing]="true"
              [rowAlternationEnabled]="true"
              (onCellDblClick)="onCellDblClick($event)"
              columnResizingMode="widget"
              (onToolbarPreparing)="onToolbarPreparing($event)"
              [(selectedRowKeys)]="selectedRowKeys"
              [hoverStateEnabled]="true"
              [showBorders]="true">
  <dxo-column-chooser
    [enabled]="true"
    mode="select">
  </dxo-column-chooser>

  <dxo-filter-panel [visible]="true"></dxo-filter-panel>
  <dxo-filter-row [visible]="true"></dxo-filter-row>
  <dxo-header-filter [visible]="true"></dxo-header-filter>
  <dxo-search-panel
    [visible]="true"
    title="Выбрать колонки"
    [width]="240"
    placeholder="Поиск..."></dxo-search-panel>

  <dxo-selection mode="single"></dxo-selection>

  <dxo-column-fixing [enabled]="true"></dxo-column-fixing>

  <dxo-state-storing [enabled]="true"
                     type="localStorage"
                     storageKey="responsibilityCentersDataGrid">
  </dxo-state-storing>

  <dxo-paging [pageSize]="20"></dxo-paging>

  <dxo-pager
    [showPageSizeSelector]="true"
    [allowedPageSizes]="[5, 10, 20]"
    [showInfo]="true">
  </dxo-pager>

  <dxi-column dataField="responsibilityCenter.id" [fixed]="false" caption="№ п/п"></dxi-column>
  <dxi-column dataField="responsibilityCenter.title" caption="Наименование"></dxi-column>
  <dxi-column dataField="equipmentCount" caption="Количество оборудования"></dxi-column>
  <dxi-column dataField="userCount" caption="Количество сотрудников"></dxi-column>


  <div *dxTemplate="let data of 'titleTemplate'">
    <h3>Центры ответственности</h3>
  </div>

  <div *dxTemplate="let data of 'actionAddTemplate'">
    <dx-button text="Добавить"
               (onClick)="add()"
               icon="add"></dx-button>
  </div>

  <div *dxTemplate="let data of 'actionEditTemplate'">
    <dx-button text="Редактировать"
               [disabled]="!selectedRowKeys"
               (onClick)="edit()"
               icon="edit"></dx-button>
  </div>

  <div *dxTemplate="let data of 'actionShowTemplate'">
    <dx-button text="Просмотр"
               [disabled]="!selectedRowKeys"
               (onClick)="show()"
               icon="file"></dx-button>
  </div>

  <dxo-summary>
    <dxi-total-item
      column="responsibilityCenter.title"
      summaryType="count">
    </dxi-total-item>
    <dxi-total-item
      column="equipmentCount"
      summaryType="sum">
    </dxi-total-item>
    <dxi-total-item
      column="userCount"
      summaryType="sum">
    </dxi-total-item>
  </dxo-summary>

</dx-data-grid>

<router-outlet class="router-card"
></router-outlet>
